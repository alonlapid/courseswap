create table Course
(
    Name varchar(256),
    CID int primary key,Point real
)

create table Student
(
    SID int primary key, 
    Name  nvarchar(256) 
)

create table Class
(
    CLID int primary key, 
    CID int, 
    SemesterName  nvarchar(256) ,
    SemesterYear  nvarchar(256), 
    Instructor nvarchar(256),
    FOREIGN KEY (CID) REFERENCES Course(CID),
    UNIQUE(CID,SemesterName,SemesterYear,Instructor)
)


create table Lesson 
(
    CLID int ,
    Location nvarchar(256),
    Day char(10) ,
    Hour real,
    FOREIGN KEY (CLID) REFERENCES Class(CLID),
    UNIQUE(CLID,Day,Hour,Location),
    CHECK(Hour >= 0.0 AND Hour < 24.0),
    CHECK(Day IN ('Sun','Mon','Tue','Wed','Thu','Fri','Sat'))
)



create table Enrollment 
(
    EID int primary key IDENTITY(1,1),
    SID int ,
    CLID int,
    EnrollmentTime datetime ,
    FOREIGN KEY (SID) REFERENCES Student(SID),
    FOREIGN KEY (CLID) REFERENCES Class(CLID),
    UNIQUE(CLID,SID,EnrollmentTime)
)

create table Prerequisite 
(    
    CID int,
    MUSTCID int,
    primary key (CID,MUSTCID),
    FOREIGN KEY (CID) REFERENCES Course(CID),
    FOREIGN KEY (MUSTCID) REFERENCES Course(CID)
)

create table ExchangeRequest 
(
    RID int primary key IDENTITY(1,1),
    SID int ,
    CLID_Src int,
    CLID_Dest int,
    RequestTime datetime,
    FOREIGN KEY (SID) REFERENCES Student(SID),
    FOREIGN KEY (CLID_Src) REFERENCES Class(CLID),
    FOREIGN KEY (CLID_Dest) REFERENCES Class(CLID)
)


